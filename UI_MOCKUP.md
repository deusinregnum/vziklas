# 🎨 Визуальный обзор интерфейса многофильтрового поиска

## Экран 1: Главное меню поиска

```
┌─────────────────────────────────────┐
│ 🔍 Вихьдаване                       │
│                                     │
│ Podľa čoho chcete hľadať?          │
│                                     │
│  [💰 Podľa ceny]                   │
│  [📍 Podľa lokality]               │
│  [🔤 Podľa kľúčového slova]        │
│  [⚙️ Pokročilé vyhľadávanie]       │
│  [❌ Zrušiť]                        │
│                                     │
└─────────────────────────────────────┘
```

## Экран 2: Меню выбора фильтров (начало)

```
┌─────────────────────────────────────┐
│ ✅ Выберите фильтры                 │
│                                     │
│ Нет выбранных фильтров              │
│                                     │
│ Нажмите кнопку для добавления       │
│ фильтра:                            │
│                                     │
│  [💰 Цена (от-до)]                 │
│  [📍 Локация]                      │
│  [🔤 Ключевое слово]               │
│  [🔍 ПОИСК]                        │
│  [❌ Отмена]                        │
│                                     │
└─────────────────────────────────────┘
```

## Экран 3: Ввод цены (минимальная)

```
┌─────────────────────────────────────┐
│ 💰 Установка цены                   │
│                                     │
│ Укажите минимальную цену (€) или    │
│ напишите 0 для пропуска:            │
│                                     │
│ [Ожидание текстовой ввода...]      │
│                                     │
│ Пользователь пишет: 300             │
│                                     │
└─────────────────────────────────────┘
```

## Экран 4: Ввод цены (максимальная)

```
┌─────────────────────────────────────┐
│ 💰 Установка цены                   │
│                                     │
│ Укажите максимальную цену (€) или   │
│ напишите 0 для пропуска:            │
│                                     │
│ [Ожидание текстовой ввода...]      │
│                                     │
│ Пользователь пишет: 600             │
│                                     │
└─────────────────────────────────────┘
```

## Экран 5: Меню выбора фильтров (с выбранной ценой)

```
┌─────────────────────────────────────┐
│ ✅ Выберите фильтры                 │
│                                     │
│ 💰 Цена от: €300                   │
│ 💰 Цена до: €600                   │
│                                     │
│ Нажмите кнопку для добавления       │
│ фильтра:                            │
│                                     │
│  [💰 Цена (от-до)]                 │
│  [📍 Локация]                      │
│  [🔤 Ключевое слово]               │
│  [🔍 ПОИСК]                        │
│  [❌ Отмена]                        │
│                                     │
└─────────────────────────────────────┘
```

## Экран 6: Выбор локации

```
┌─────────────────────────────────────┐
│ 📍 Выберите локацию:                │
│                                     │
│  [Bratislava]                      │
│  [Banská Bystrica]                 │
│  [Košice]                          │
│  [Prešov]                          │
│  [Trnava]                          │
│  [Trenčín]                         │
│  [Zvolen]                          │
│  [Nitra]                           │
│  [Michalovce]                      │
│  [Liptovský Mikuláš]               │
│  [« Назад]                         │
│                                     │
└─────────────────────────────────────┘
```

## Экран 7: Меню с ценой и локацией

```
┌─────────────────────────────────────┐
│ ✅ Выберите фильтры                 │
│                                     │
│ 💰 Цена от: €300                   │
│ 💰 Цена до: €600                   │
│ 📍 Локация: Bratislava              │
│                                     │
│ Нажмите кнопку для добавления       │
│ фильтра:                            │
│                                     │
│  [💰 Цена (от-до)]                 │
│  [📍 Локация]                      │
│  [🔤 Ключевое слово]               │
│  [🔍 ПОИСК]                        │
│  [❌ Отмена]                        │
│                                     │
└─────────────────────────────────────┘
```

## Экран 8: Результаты поиска (с пагинацией)

```
┌─────────────────────────────────────┐
│ ✅ Výsledky vyhľadávania            │
│                                     │
│ 🔍 €300-€600 + Bratislava          │
│ 📊 Nájdených: 11 inzerátov         │
│ 📄 Strana 1 z 2                    │
│                                     │
│ 🏢 Prenájom izby v 4-izbovom...    │
│ 💰 €340                            │
│                                     │
│ 🏢 Ponúkam na prenájom útulnú...   │
│ 💰 €350                            │
│                                     │
│ 🏢 Moderný byt v centre Bratislavy │
│ 💰 €420                            │
│                                     │
│ 🏢 Prenájom 1-izbového bytu...     │
│ 💰 €480                            │
│                                     │
│ 🏢 Útulná izba s prístupom...      │
│ 💰 €500                            │
│                                     │
│ [⬅️ Späť] [1/2] [Ďalej ➡️]        │
│ [« Späť na zoznam]                 │
│                                     │
└─────────────────────────────────────┘
```

## Экран 9: Вторая страница результатов

```
┌─────────────────────────────────────┐
│ ✅ Výsledky vyhľadávania            │
│                                     │
│ 🔍 €300-€600 + Bratislava          │
│ 📊 Nájdených: 11 inzerátov         │
│ 📄 Strana 2 z 2                    │
│                                     │
│ 🏢 Priestranný byt v tichej...     │
│ 💰 €520                            │
│                                     │
│ 🏢 Prenajmem moderný štúdio...     │
│ 💰 €550                            │
│                                     │
│ 🏢 Útulný menej známý byt...       │
│ 💰 €580                            │
│                                     │
│ 🏢 Prekrásny byt s balkónom...     │
│ 💰 €600                            │
│                                     │
│ [⬅️ Späť] [2/2]                   │
│ [« Späť na zoznam]                 │
│                                     │
└─────────────────────────────────────┘
```

## Поток выполнения

```
START
  ↓
/search или кнопка меню
  ↓
🔍 Выберите тип поиска
  ├─→ 💰 Podľa ceny
  ├─→ 📍 Podľa lokality
  ├─→ 🔤 Podľa kľúčového slova
  ├─→ ⚙️ Pokročilé vyhľadávanie (2+ filtry) ← НОВОЕ!
  │    ↓
  │  ✅ Выберите фильтры
  │    ├─→ 💰 Цена (от-до)
  │    │   ├─→ Введите min
  │    │   └─→ Введите max
  │    │
  │    ├─→ 📍 Локация
  │    │   └─→ Выберите район
  │    │
  │    ├─→ 🔤 Ключевое слово
  │    │   └─→ Введите слово
  │    │
  │    ├─→ 🔍 ПОИСК → Результаты (с пагинацией)
  │    │              ├─→ ⬅️ Poprzednia strona
  │    │              └─→ Ďalej ➡️
  │    │
  │    └─→ ❌ Отмена → END
  │
  └─→ ❌ Zrušiť → END
```

## Таблица состояний

| Состояние | Функция | Обработчик |
|---|---|---|
| `SEARCH_TYPE` | `search()` | `button_callback()` |
| `MULTI_FILTER_STATE` | `multi_filter_menu()` | `multi_filter_text_handler()` |
| | `show_filter_selection()` | `button_callback()` |
| | `set_price_range()` | `MessageHandler` |
| | `set_district()` | `CallbackQueryHandler` |
| | `set_keyword()` | `MessageHandler` |

## Логика обработки callback'ов

```python
if data == "multi_filter_menu":
    → multi_filter_menu()
    → show_filter_selection()

if data == "set_price_range":
    → set_price_range()
    → Ожидание текстового ввода min_price

if data == "set_district":
    → set_district()
    → Показ списка районов

if data.startswith("dist_"):
    → district_selected_multi()
    → show_filter_selection()

if data == "execute_multi_filter":
    → search_rentals_combined(filters)
    → show_search_results(results)
    → Пагинация (⬅️/➡️)
```

## Легенда символов

- 🔍 Поиск
- 💰 Цена
- 📍 Локация/Адрес
- 🔤 Текст/Слово
- ⚙️ Настройки/Продвинутое
- ✅ Готово/Выбрано
- ❌ Отмена/Ошибка
- 🏢 Квартира/Объект
- 📊 Статистика
- 📄 Страница
- ⬅️ Назад/Предыдущая
- ➡️ Вперед/Следующая
